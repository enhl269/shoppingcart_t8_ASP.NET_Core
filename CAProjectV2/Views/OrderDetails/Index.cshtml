@model IEnumerable<CAProjectV2.Models.OrderDetails>


@{
    ViewData["Title"] = "My Purchases";
    Layout = "~/Views/Shared/_Layout.cshtml";
    Dictionary<string, List<string>> orderCart = (Dictionary<string, List<string>>)ViewData["Data"];
    Dictionary<string, List<string>> imageCart = (Dictionary<string, List<string>>)ViewData["Images"];
    List<OrderDetails> orderCartNoDup = new List<OrderDetails>();
    List<DataView> UniqueList = (List<DataView>)ViewData["UniqueList"];

}

@section Scripts
{

}
<h1>Purchase History</h1>

<table class="table">


    <tbody>

        @foreach (var value in UniqueList)
        {

            @:<tr>
                @:<td>
                    @Model.Where(x => x.ProductId == value.ProductId && x.Order.Date == value.Date).Select(x => x.Product.ProductName).FirstOrDefault();
                @:</td>
                @:<td>
                    @Model.Where(x => x.ProductId == value.ProductId && x.Order.Date == value.Date).Select(x => x.Order.Date.ToString("dd MMMM yyyy")).FirstOrDefault();
                @:</td>
                @:<td>
                    <img src="@Model.Where(x => x.ProductId == value.ProductId && x.Order.Date == value.Date).Select(x => x.Product.ImageUrl).FirstOrDefault()" height="100" width="100" />
                @:</td>
                <td>
                    @Model.Where(x => x.ProductId == value.ProductId && x.Order.Date == value.Date).Count()
                </td>
                @:<td>
                    @:<select>
                        @foreach (var x in Model.Where(x => x.ProductId == value.ProductId && x.Order.Date == value.Date))
                        {
                            <option value="@Html.DisplayFor(modelItem=>x.ActivationCode)">@Html.DisplayFor(modelItem => x.ActivationCode)</option>
                        }
                    @:</select>
                @:</td>


                @:<td>
                    <a href="@Model.Where(x => x.ProductId == value.ProductId && x.Order.Date == value.Date).Select(x => x.Product.ImageUrl).FirstOrDefault()" download>Download</a>
                @:</td>

            @:</tr>
































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































































        }

    </tbody>
</table>